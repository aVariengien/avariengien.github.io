<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Plot</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.5.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.5.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="eed2f792-a336-41da-8546-918548f8f2b5" data-root-id="p1468" style="display: contents;"></div>
  
    <script type="application/json" id="d3c11769-0a9e-47ba-bce5-f96a639af313">
      {"518d7d99-fecb-436a-9c81-617ed52d4fdc":{"version":"3.5.2","title":"Bokeh Application","roots":[{"type":"object","name":"Row","id":"p1468","attributes":{"sizing_mode":"stretch_both","children":[{"type":"object","name":"Column","id":"p1467","attributes":{"width":350,"sizing_mode":"stretch_height","children":[{"type":"object","name":"Select","id":"p1455","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1456","attributes":{"args":{"type":"map","entries":[["source",{"type":"object","name":"ColumnDataSource","id":"p1352","attributes":{"selected":{"type":"object","name":"Selection","id":"p1353","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1354"},"data":{"type":"map","entries":[["x",[-3.53536319732666,7.337944984436035,7.389133930206299,-2.024549722671509,2.5742616653442383,2.771587371826172,7.5971760749816895,-1.9797163009643555,0.9402118921279907,-3.4140162467956543,-2.8424317836761475,-3.5258355140686035,-3.0497255325317383,2.5638859272003174,7.480458736419678,7.158874988555908,-3.3547000885009766,2.540740966796875,7.345669269561768,6.864674091339111,-3.147156000137329,-3.601675271987915,2.6664249897003174,-3.264634132385254,7.066359043121338,-3.161390781402588,-3.5764994621276855,-3.067854166030884,-3.579634666442871,7.0206217765808105,-3.544656753540039,7.456970691680908,-3.3010408878326416,2.3379251956939697,-3.6013340950012207,-2.764456272125244,-3.0676774978637695,2.3125743865966797,0.9457218050956726,-3.3147764205932617,7.505589008331299,7.146239757537842,7.391673564910889,0.5894732475280762,-2.2543630599975586,7.203826427459717,2.5031967163085938,7.566224098205566,-3.634762763977051,7.358433246612549,7.410431385040283,3.327307939529419,6.990081310272217,-5.247864723205566,-5.451235771179199,-2.8147428035736084,7.178874492645264,0.2207827866077423,-2.7713303565979004,-3.1399989128112793,-0.7539652585983276,-0.05365939438343048,-5.0889973640441895,0.6827477812767029,-2."\ud83c\udf7d\ufe0f\ud83e\uddd1\u200d\ud83c\udf73\ud83c\udf5b","\ud83d\udc6a\u23ea\ud83d\udcfc","\ud83d\udd4d\u26ea\ud83c\uddf0\ud83c\uddf3","\u269b\ufe0f\ud83d\udd2c\ud83d\udd2d","\ud83e\uddd1\u200d\ud83d\udcbb\ud83d\udcbb\ud83c\udf10"]]]}}}],["field_glyphs",{"type":"map","entries":[["emoji",{"type":"object","name":"GlyphRenderer","id":"p1398","attributes":{"visible":true,"data_source":{"id":"p1352"},"view":{"type":"object","name":"CDSView","id":"p1399","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1400"}}},"glyph":{"type":"object","name":"Scatter","id":"p1395","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1396","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1397","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],["emoji_list",{"type":"object","name":"GlyphRenderer","id":"p1408","attributes":{"visible":false,"data_source":{"id":"p1352"},"view":{"type":"object","name":"CDSView","id":"p1409","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1410"}}},"glyph":{"type":"object","name":"Scatter","id":"p1405","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1406","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1407","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"blue"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],["personality",{"type":"object","name":"GlyphRenderer","id":"p1420","attributes":{"visible":false,"data_source":{"id":"p1352"},"view":{"type":"object","name":"CDSView","id":"p1421","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1422"}}},"glyph":{"type":"object","name":"Scatter","id":"p1417","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"personality","transform":{"type":"object","name":"CategoricalColorMapper","id":"p1413","attributes":{"palette":["#d60000","#8c3bff"],"factors":["Agreeable \nCollaborator: You \nbuild upon others' \nideas and try to \ncombine the best \nelements. ","Wild Explorer: You \ngenerate completely \nnovel and unexpected \nideas that haven't \nbeen considered. "]}}},"line_alpha":{"type":"value","value":0.7},"fill_color":{"type":"field","field":"personality","transform":{"id":"p1413"}},"fill_alpha":{"type":"value","value":0.7},"hatch_alpha":{"type":"value","value":0.7}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1418","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"personality","transform":{"id":"p1413"}},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"field","field":"personality","transform":{"id":"p1413"}},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1419","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"personality","transform":{"id":"p1413"}},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"field","field":"personality","transform":{"id":"p1413"}},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],["conversation_id",{"type":"object","name":"GlyphRenderer","id":"p1433","attributes":{"visible":false,"data_source":{"id":"p1352"},"view":{"type":"object","name":"CDSView","id":"p1434","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1435"}}},"glyph":{"type":"object","name":"Scatter","id":"p1430","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"conversation_id","transform":{"type":"object","name":"LinearColorMapper","id":"p1426","attributes":{"palette":["#440154","#440255","#440357","#450558","#45065A","#45085B","#46095C","#460B5E","#460C5F","#460E61","#470F62","#471163","#471265","#471466","#471567","#471669","#47186A","#48196B","#481A6C","#481C6E","#481D6F","#481E70","#482071","#482172","#482273","#482374","#472575","#472676","#472777","#472878","#472A79","#472B7A","#472C7B","#462D7C","#462F7C","#46307D","#46317E","#45327F","#45347F","#453580","#453681","#443781","#443982","#433A83","#433B83","#433C84","#423D84","#423E85","#424085","#414186","#414286","#404387","#404487","#3F4587","#3F4788","#3E4888","#3E4989","#3D4A89","#3D4B89","#3D4C89","#3C4D8A","#3C4E8A","#3B508A","#3B518A","#3A528B","#3A538B","#39548B","#39558B","#38568B","#38578C","#37588C","#37598C","#365A8C","#365B8C","#355C8C","#355D8C","#345E8D","#345F8D","#33608D","#33618D","#32628D","#32638D","#31648D","#31658D","#31668D","#30678D","#30688D","#2F698D","#2F6A8D","#2E6B8E","#2E6C8E","#2E6D8E","#2D6E8E","#2D6F8E","#2C708E","#2C718E","#2C728E","#2B738E","#2B748E","#2A758E","#2A768E","#2A778E","#29788E","#29798E","#287A8E","#287A8E","#287B8E","#277C8E","#277D8E","#277E8E","#267F8E","#26808E","#26818E","#25828E","#25838D","#24848D","#24858D","#24868D","#23878D","#23888D","#23898D","#22898D","#228A8D","#228B8D","#218C8D","#218D8C","#218E8C","#208F8C","#20908C","#20918C","#1F928C","#1F938B","#1F948B","#1F958B","#1F968B","#1E978A","#1E988A","#1E998A","#1E998A","#1E9A89","#1E9B89","#1E9C89","#1E9D88","#1E9E88","#1E9F88","#1EA087","#1FA187","#1FA286","#1FA386","#20A485","#20A585","#21A685","#21A784","#22A784","#23A883","#23A982","#24AA82","#25AB81","#26AC81","#27AD80","#28AE7F","#29AF7F","#2AB07E","#2BB17D","#2CB17D","#2EB27C","#2FB37B","#30B47A","#32B57A","#33B679","#35B778","#36B877","#38B976","#39B976","#3BBA75","#3DBB74","#3EBC73","#40BD72","#42BE71","#44BE70","#45BF6F","#47C06E","#49C16D","#4BC26C","#4DC26B","#4FC369","#51C468","#53C567","#55C666","#57C665","#59C764","#5BC862","#5EC961","#60C960","#62CA5F","#64CB5D","#67CC5C","#69CC5B","#6BCD59","#6DCE58","#70CE56","#72CF55","#74D054","#77D052","#79D151","#7CD24F","#7ED24E","#81D34C","#83D34B","#86D449","#88D547","#8BD546","#8DD644","#90D643","#92D741","#95D73F","#97D83E","#9AD83C","#9DD93A","#9FD938","#A2DA37","#A5DA35","#A7DB33","#AADB32","#ADDC30","#AFDC2E","#B2DD2C","#B5DD2B","#B7DD29","#BADE27","#BDDE26","#BFDF24","#C2DF22","#C5DF21","#C7E01F","#CAE01E","#CDE01D","#CFE11C","#D2E11B","#D4E11A","#D7E219","#DAE218","#DCE218","#DFE318","#E1E318","#E4E318","#E7E419","#E9E419","#ECE41A","#EEE51B","#F1E51C","#F3E51E","#F6E61F","#F8E621","#FAE622","#FDE724"],"low":0,"high":48}}},"line_alpha":{"type":"value","value":0.7},"fill_color":{"type":"field","field":"conversation_id","transform":{"id":"p1426"}},"fill_alpha":{"type":"value","value":0.7},"hatch_alpha":{"type":"value","value":0.7}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1431","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"conversation_id","transform":{"id":"p1426"}},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"field","field":"conversation_id","transform":{"id":"p1426"}},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1432","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"conversation_id","transform":{"id":"p1426"}},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"field","field":"conversation_id","transform":{"id":"p1426"}},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],["turn",{"type":"object","name":"GlyphRenderer","id":"p1446","attributes":{"visible":false,"data_source":{"id":"p1352"},"view":{"type":"object","name":"CDSView","id":"p1447","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1448"}}},"glyph":{"type":"object","name":"Scatter","id":"p1443","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"turn","transform":{"type":"object","name":"LinearColorMapper","id":"p1439","attributes":{"palette":["#440154","#440255","#440357","#450558","#45065A","#45085B","#46095C","#460B5E","#460C5F","#460E61","#470F62","#471163","#471265","#471466","#471567","#471669","#47186A","#48196B","#481A6C","#481C6E","#481D6F","#481E70","#482071","#482172","#482273","#482374","#472575","#472676","#472777","#472878","#472A79","#472B7A","#472C7B","#462D7C","#462F7C","#46307D","#46317E","#45327F","#45347F","#453580","#453681","#443781","#443982","#433A83","#433B83","#433C84","#423D84","#423E85","#424085","#414186","#414286","#404387","#404487","#3F4587","#3F4788","#3E4888","#3E4989","#3D4A89","#3D4B89","#3D4C89","#3C4D8A","#3C4E8A","#3B508A","#3B518A","#3A528B","#3A538B","#39548B","#39558B","#38568B","#38578C","#37588C","#37598C","#365A8C","#365B8C","#355C8C","#355D8C","#345E8D","#345F8D","#33608D","#33618D","#32628D","#32638D","#31648D","#31658D","#31668D","#30678D","#30688D","#2F698D","#2F6A8D","#2E6B8E","#2E6C8E","#2E6D8E","#2D6E8E","#2D6F8E","#2C708E","#2C718E","#2C728E","#2B738E","#2B748E","#2A758E","#2A768E","#2A778E","#29788E","#29798E","#287A8E","#287A8E","#287B8E","#277C8E","#277D8E","#277E8E","#267F8E","#26808E","#26818E","#25828E","#25838D","#24848D","#24858D","#24868D","#23878D","#23888D","#23898D","#22898D","#228A8D","#228B8D","#218C8D","#218D8C","#218E8C","#208F8C","#20908C","#20918C","#1F928C","#1F938B","#1F948B","#1F958B","#1F968B","#1E978A","#1E988A","#1E998A","#1E998A","#1E9A89","#1E9B89","#1E9C89","#1E9D88","#1E9E88","#1E9F88","#1EA087","#1FA187","#1FA286","#1FA386","#20A485","#20A585","#21A685","#21A784","#22A784","#23A883","#23A982","#24AA82","#25AB81","#26AC81","#27AD80","#28AE7F","#29AF7F","#2AB07E","#2BB17D","#2CB17D","#2EB27C","#2FB37B","#30B47A","#32B57A","#33B679","#35B778","#36B877","#38B976","#39B976","#3BBA75","#3DBB74","#3EBC73","#40BD72","#42BE71","#44BE70","#45BF6F","#47C06E","#49C16D","#4BC26C","#4DC26B","#4FC369","#51C468","#53C567","#55C666","#57C665","#59C764","#5BC862","#5EC961","#60C960","#62CA5F","#64CB5D","#67CC5C","#69CC5B","#6BCD59","#6DCE58","#70CE56","#72CF55","#74D054","#77D052","#79D151","#7CD24F","#7ED24E","#81D34C","#83D34B","#86D449","#88D547","#8BD546","#8DD644","#90D643","#92D741","#95D73F","#97D83E","#9AD83C","#9DD93A","#9FD938","#A2DA37","#A5DA35","#A7DB33","#AADB32","#ADDC30","#AFDC2E","#B2DD2C","#B5DD2B","#B7DD29","#BADE27","#BDDE26","#BFDF24","#C2DF22","#C5DF21","#C7E01F","#CAE01E","#CDE01D","#CFE11C","#D2E11B","#D4E11A","#D7E219","#DAE218","#DCE218","#DFE318","#E1E318","#E4E318","#E7E419","#E9E419","#ECE41A","#EEE51B","#F1E51C","#F3E51E","#F6E61F","#F8E621","#FAE622","#FDE724"],"low":0,"high":9}}},"line_alpha":{"type":"value","value":0.7},"fill_color":{"type":"field","field":"turn","transform":{"id":"p1439"}},"fill_alpha":{"type":"value","value":0.7},"hatch_alpha":{"type":"value","value":0.7}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1444","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"turn","transform":{"id":"p1439"}},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"field","field":"turn","transform":{"id":"p1439"}},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1445","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":10},"line_color":{"type":"field","field":"turn","transform":{"id":"p1439"}},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"field","field":"turn","transform":{"id":"p1439"}},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}]]}],["color_bars",{"type":"map","entries":[["emoji",{"type":"object","name":"Div","id":"p1401"}],["emoji_list",{"type":"object","name":"Div","id":"p1412"}],["personality",{"type":"object","name":"ColorBar","id":"p1423","attributes":{"visible":false,"location":[0,0],"title":"personality ","major_label_policy":{"type":"object","name":"NoOverlap","id":"p1424"},"major_label_text_font_size":"8pt","label_standoff":12,"color_mapper":{"id":"p1413"}}}],["conversation_id",{"type":"object","name":"ColorBar","id":"p1436","attributes":{"visible":false,"location":[0,0],"title":"conversation_id ","major_label_policy":{"type":"object","name":"NoOverlap","id":"p1437"},"major_label_text_font_size":"8pt","label_standoff":12,"color_mapper":{"id":"p1426"}}}],["turn",{"type":"object","name":"ColorBar","id":"p1449","attributes":{"visible":false,"location":[0,0],"title":"turn ","major_label_policy":{"type":"object","name":"NoOverlap","id":"p1450"},"major_label_text_font_size":"8pt","label_standoff":12,"color_mapper":{"id":"p1439"}}}]]}],["additional_glyph",{"type":"map","entries":[["emoji",{"type":"object","name":"LabelSet","id":"p1388","attributes":{"visible":true,"source":{"id":"p1352"},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"emoji_dynamic"},"x_offset":{"type":"value","value":-10},"y_offset":{"type":"value","value":-5}}}],["emoji_list",{"type":"object","name":"Div","id":"p1411"}],["personality",{"type":"object","name":"Div","id":"p1425"}],["conversation_id",{"type":"object","name":"Div","id":"p1438"}],["turn",{"type":"object","name":"Div","id":"p1451"}]]}]]},"code":"\n        var selected_field = cb_obj.value;\n        source.data['active_chunk'][1] = selected_field;\n        for (let i = 0; i &lt; source.data['val_on_display'].length; i++) {\n            source.data['val_on_display'][i] = source.data[selected_field][i];\n        }\n        for (var field in field_glyphs) {\n            field_glyphs[field].visible = (field === selected_field);\n            color_bars[field].visible = (field === selected_field);\n            additional_glyph[field].visible = (field === selected_field);\n        }\n    "}}]]]},"width":300,"width_policy":"fixed","title":"","options":["emoji","personality","conversation_id","turn"],"value":"emoji"}},{"type":"object","name":"Div","id":"p1454","attributes":{"width":300,"height":500,"min_width":150,"min_height":400,"max_width":300,"max_height":1000,"width_policy":"fixed","height_policy":"max","sizing_mode":"stretch_height"}},{"type":"object","name":"Row","id":"p1466","attributes":{"width":150,"height":50,"sizing_mode":"fixed","children":[{"type":"object","name":"Div","id":"p1465","attributes":{"width":100,"sizing_mode":"fixed"}},{"type":"object","name":"Button","id":"p1462","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p1459","attributes":{"args":{"type":"map","entries":[["source",{"id":"p1352"}],["text_div",{"id":"p1454"}],["prev_lines",[]],["next_lines",[]],["n_connections",0]]},"code":"\n    function updateActiveChunk(source, text_div, prev_lines, next_lines, new_active_index, n_connections) {\n        console.log(new_active_index);\n        if (new_active_index !== null &amp;&amp; new_active_index &gt;= 0) {\n            source.data['active_chunk'][0] = new_active_index;\n            source.selected.indices = [new_active_index];\n            var text = source.data['text'][new_active_index] || '';\n            text_div.text = text + '&lt;br&gt;&lt;br&gt;' + source.data['active_chunk'][1] + ': ' + source.data['val_on_display'][new_active_index];\n\n            // Hide all lines initially\n            prev_lines.forEach(line =&gt; line.visible = false);\n            next_lines.forEach(line =&gt; line.visible = false);\n\n            var current_index = new_active_index;\n            // Show previous connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var prev_chunk = source.data['prev_chunk'][current_index];\n                if (prev_chunk !== new_active_index &amp;&amp; prev_chunk !== current_index) {\n                    prev_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][prev_chunk]];\n                    prev_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][prev_chunk]];\n                    prev_lines[i].visible = true;\n                    current_index = prev_chunk;\n                } else {\n                    break;\n                }\n            }\n            \n            current_index = new_active_index;\n\n            // Show next connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var next_chunk = source.data['next_chunk'][current_index];\n                if (next_chunk !== null &amp;&amp; next_chunk !== current_index) {\n                    next_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][next_chunk]];\n                    next_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][next_chunk]];\n                    next_lines[i].visible = true;\n                    current_index = next_chunk;\n                } else {\n                    break;\n                }\n            }\n\n            prev_lines.forEach(line =&gt; line.data_source.change.emit());\n            next_lines.forEach(line =&gt; line.data_source.change.emit());\n            source.change.emit();\n        }\n    }\n    \n        var active_index = source.data['active_chunk'][0];\n        if (active_index &gt;= 0) {\n            var prev_chunk = active_index - 1; //source.data['prev_chunk'][active_index];\n            if (prev_chunk &lt;= 0) {\n                prev_chunk = 0;\n            }\n            updateActiveChunk(source, text_div, prev_lines, next_lines, prev_chunk, n_connections);\n            source.data['active_index'][0] = prev_chunk\n        }\n        "}}]]]},"styles":{"type":"object","name":"Styles","id":"p1461","attributes":{"opacity":"0.75"}},"width":50,"label":"\u2b05\ufe0f"}},{"type":"object","name":"Button","id":"p1464","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p1460","attributes":{"args":{"type":"map","entries":[["source",{"id":"p1352"}],["text_div",{"id":"p1454"}],["prev_lines",[]],["next_lines",[]],["n_connections",0]]},"code":"\n    function updateActiveChunk(source, text_div, prev_lines, next_lines, new_active_index, n_connections) {\n        console.log(new_active_index);\n        if (new_active_index !== null &amp;&amp; new_active_index &gt;= 0) {\n            source.data['active_chunk'][0] = new_active_index;\n            source.selected.indices = [new_active_index];\n            var text = source.data['text'][new_active_index] || '';\n            text_div.text = text + '&lt;br&gt;&lt;br&gt;' + source.data['active_chunk'][1] + ': ' + source.data['val_on_display'][new_active_index];\n\n            // Hide all lines initially\n            prev_lines.forEach(line =&gt; line.visible = false);\n            next_lines.forEach(line =&gt; line.visible = false);\n\n            var current_index = new_active_index;\n            // Show previous connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var prev_chunk = source.data['prev_chunk'][current_index];\n                if (prev_chunk !== new_active_index &amp;&amp; prev_chunk !== current_index) {\n                    prev_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][prev_chunk]];\n                    prev_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][prev_chunk]];\n                    prev_lines[i].visible = true;\n                    current_index = prev_chunk;\n                } else {\n                    break;\n                }\n            }\n            \n            current_index = new_active_index;\n\n            // Show next connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var next_chunk = source.data['next_chunk'][current_index];\n                if (next_chunk !== null &amp;&amp; next_chunk !== current_index) {\n                    next_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][next_chunk]];\n                    next_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][next_chunk]];\n                    next_lines[i].visible = true;\n                    current_index = next_chunk;\n                } else {\n                    break;\n                }\n            }\n\n            prev_lines.forEach(line =&gt; line.data_source.change.emit());\n            next_lines.forEach(line =&gt; line.data_source.change.emit());\n            source.change.emit();\n        }\n    }\n    \n        var active_index = source.data['active_chunk'][0];\n        if (active_index &gt;= 0) {\n            var next_chunk = active_index + 1; //source.data['prev_chunk'][active_index];\n            if (next_chunk &gt;= source.data['text'].length-1) {\n                next_chunk = source.data['text'].length-1;\n            }\n            updateActiveChunk(source, text_div, prev_lines, next_lines, next_chunk, n_connections);\n            source.data['active_index'][0] = next_chunk\n        }\n        "}}]]]},"styles":{"type":"object","name":"Styles","id":"p1463","attributes":{"opacity":"0.75"}},"width":50,"label":"\u27a1\ufe0f"}}]}}]}},{"type":"object","name":"Figure","id":"p1355","attributes":{"width":900,"height":700,"min_width":600,"min_height":400,"max_width":1200,"max_height":1000,"width_policy":"max","height_policy":"min","sizing_mode":"stretch_both","x_range":{"type":"object","name":"DataRange1d","id":"p1356","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:end",[{"type":"object","name":"CustomJS","id":"p1457","attributes":{"args":{"type":"map","entries":[["x_range",{"id":"p1356"}],["y_range",{"type":"object","name":"DataRange1d","id":"p1357","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:end",[{"id":"p1457"}]]]}}}],["original_ranges",{"type":"map","entries":[["x",[]],["y",[]]]}],["source",{"id":"p1352"}],["previous_index",{"type":"map","entries":[["index",-1]]}]]},"code":"\n        if (original_ranges['x'].length == 0) {\n            original_ranges['x'] = [x_range.start, x_range.end];\n            original_ranges['y'] = [y_range.start, y_range.end];\n        }\n        var x_zoom = (x_range.end - x_range.start) / (original_ranges['x'][1] - original_ranges['x'][0]);\n        var y_zoom = (y_range.end - y_range.start) / (original_ranges['y'][1] - original_ranges['y'][0]);\n\n        var average_zoom = (x_zoom + y_zoom) / 2;  \n        var min_level = 0.; // to adjust to change the range\n        var max_level = 0.6; // the higher\n        console.log(average_zoom);\n\n        for (const field of ['emoji', 'keyword']) {         \n            if (field in source.data) {\n                var number_zoom_level = source.data[field+'_list'][0].split(\",\").length; //, is the separator\n                \n                var index_to_show = Math.floor(\n                    (number_zoom_level - 1) * \n                    (average_zoom - min_level) / (max_level - min_level)\n                );\n\n                console.log(index_to_show);\n                console.log(number_zoom_level);\n\n                // Ensure the index is within the valid range\n                index_to_show = Math.max(0, Math.min(index_to_show, number_zoom_level - 1));\n                \n                if (index_to_show != previous_index['index']) {\n                    console.log(index_to_show);\n                    previous_index['index'] = index_to_show;\n                    for (let i = 0; i &lt; source.data[field].length; i++) {\n                        source.data[field+\"_dynamic\"][i] = source.data[field+'_list'][i].split(\",\")[number_zoom_level-1-index_to_show];\n                        \n                        //console.log( source.data[field+'_list'][i].split(\",\")[number_zoom_level-1-index_to_show]);\n                        //console.log( source.data[field+'_list'][i]);\n                        //console.log(number_zoom_level);\n                    }\n                }\n            }\n        }\n    "}}]]]}}},"y_range":{"id":"p1357"},"x_scale":{"type":"object","name":"LinearScale","id":"p1364"},"y_scale":{"type":"object","name":"LinearScale","id":"p1365"},"title":{"type":"object","name":"Title","id":"p1362"},"renderers":[{"id":"p1398"},{"id":"p1408"},{"id":"p1420"},{"id":"p1433"},{"id":"p1446"}],"toolbar":{"type":"object","name":"Toolbar","id":"p1363","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1376"},{"type":"object","name":"WheelZoomTool","id":"p1377","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p1378","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1379","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"p1385","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"p1384","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}}}},{"type":"object","name":"ResetTool","id":"p1386"},{"type":"object","name":"SaveTool","id":"p1387"},{"type":"object","name":"HoverTool","id":"p1452","attributes":{"renderers":[{"id":"p1398"},{"id":"p1408"},{"id":"p1420"},{"id":"p1433"},{"id":"p1446"}],"tooltips":"\n        @hover_texts | Value: @val_on_display\n    "}},{"type":"object","name":"TapTool","id":"p1453","attributes":{"renderers":"auto","callback":{"type":"object","name":"CustomJS","id":"p1458","attributes":{"args":{"type":"map","entries":[["source",{"id":"p1352"}],["text_div",{"id":"p1454"}],["prev_lines",[]],["next_lines",[]],["n_connections",0]]},"code":"\n    function updateActiveChunk(source, text_div, prev_lines, next_lines, new_active_index, n_connections) {\n        console.log(new_active_index);\n        if (new_active_index !== null &amp;&amp; new_active_index &gt;= 0) {\n            source.data['active_chunk'][0] = new_active_index;\n            source.selected.indices = [new_active_index];\n            var text = source.data['text'][new_active_index] || '';\n            text_div.text = text + '&lt;br&gt;&lt;br&gt;' + source.data['active_chunk'][1] + ': ' + source.data['val_on_display'][new_active_index];\n\n            // Hide all lines initially\n            prev_lines.forEach(line =&gt; line.visible = false);\n            next_lines.forEach(line =&gt; line.visible = false);\n\n            var current_index = new_active_index;\n            // Show previous connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var prev_chunk = source.data['prev_chunk'][current_index];\n                if (prev_chunk !== new_active_index &amp;&amp; prev_chunk !== current_index) {\n                    prev_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][prev_chunk]];\n                    prev_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][prev_chunk]];\n                    prev_lines[i].visible = true;\n                    current_index = prev_chunk;\n                } else {\n                    break;\n                }\n            }\n            \n            current_index = new_active_index;\n\n            // Show next connections\n            for (var i = 0; i &lt; n_connections; i++) {\n                var next_chunk = source.data['next_chunk'][current_index];\n                if (next_chunk !== null &amp;&amp; next_chunk !== current_index) {\n                    next_lines[i].data_source.data['x'] = [source.data['x'][current_index], source.data['x'][next_chunk]];\n                    next_lines[i].data_source.data['y'] = [source.data['y'][current_index], source.data['y'][next_chunk]];\n                    next_lines[i].visible = true;\n                    current_index = next_chunk;\n                } else {\n                    break;\n                }\n            }\n\n            prev_lines.forEach(line =&gt; line.data_source.change.emit());\n            next_lines.forEach(line =&gt; line.data_source.change.emit());\n            source.change.emit();\n        }\n    }\n    \n        var index = cb_data.source.selected.indices[0];\n        updateActiveChunk(source, text_div, prev_lines, next_lines, index, n_connections);\n        "}}}}],"active_scroll":{"id":"p1377"}}},"left":[{"type":"object","name":"LinearAxis","id":"p1371","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1372","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1373"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1374"}}}],"right":[{"id":"p1423"},{"id":"p1436"},{"id":"p1449"}],"below":[{"type":"object","name":"LinearAxis","id":"p1366","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1367","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1368"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1369"}}}],"center":[{"type":"object","name":"Grid","id":"p1370","attributes":{"axis":{"id":"p1366"}}},{"type":"object","name":"Grid","id":"p1375","attributes":{"dimension":1,"axis":{"id":"p1371"}}},{"id":"p1388"}]}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('d3c11769-0a9e-47ba-bce5-f96a639af313').textContent;
              const render_items = [{"docid":"518d7d99-fecb-436a-9c81-617ed52d4fdc","roots":{"p1468":"eed2f792-a336-41da-8546-918548f8f2b5"},"root_ids":["p1468"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>